<!DOCTYPE html><html lang="en" ><head> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2093656452178150" crossorigin="anonymous"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="K8s Pod 이미지 Pull 에러 해결방안" /><meta name="author" content="garit" /><meta property="og:locale" content="en" /><meta name="description" content="K8s Pod 이미지 Pull 에러 해결방안" /><meta property="og:description" content="K8s Pod 이미지 Pull 에러 해결방안" /><link rel="canonical" href="https://ga0-lee.github.io/posts/k8s-image-pull-error/" /><meta property="og:url" content="https://ga0-lee.github.io/posts/k8s-image-pull-error/" /><meta property="og:site_name" content="Garit!" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-11-17T10:40:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="K8s Pod 이미지 Pull 에러 해결방안" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"garit"},"dateModified":"2022-12-14T11:05:07+09:00","datePublished":"2022-11-17T10:40:00+09:00","description":"K8s Pod 이미지 Pull 에러 해결방안","headline":"K8s Pod 이미지 Pull 에러 해결방안","mainEntityOfPage":{"@type":"WebPage","@id":"https://ga0-lee.github.io/posts/k8s-image-pull-error/"},"url":"https://ga0-lee.github.io/posts/k8s-image-pull-error/"}</script><title>K8s Pod 이미지 Pull 에러 해결방안 | Garit!</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Garit!"><meta name="application-name" content="Garit!"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/cotes2020/chirpy-images/main/commons/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Garit!</a></div><div class="site-subtitle font-italic">Record what I understand of</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ga0-lee" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['lleun8956','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>K8s Pod 이미지 Pull 에러 해결방안</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>K8s Pod 이미지 Pull 에러 해결방안</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1668649200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Nov 17, 2022 </em> </span> <span> Updated <em class="" data-ts="1670983507" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 14, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> ga0-lee </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="807 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><h2 id="k8s-pod-이미지-pull-에러-해결방안"><span class="mr-2">K8s Pod 이미지 Pull 에러 해결방안</span><a href="#k8s-pod-이미지-pull-에러-해결방안" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="상황"><span class="mr-2">상황</span><a href="#상황" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Jenkins 파이프라인을 지우고 다시 생성하면서 버전이 같은 이미지가 생성되었다.<br /> ECR에서는 같은 버전의 이미지가 push 되면 기존에 있던 이미지를 untagged로 바꾸고 새로 push된 이미지를 해당 버전으로 표기하여 저장한다.<br /> <br /> 그러나 EKS에서 해당 버전으로 배포를 다시 했더니 새로 빌드한 이미지가 아닌 예전에 생성된 이미지로 Pod가 배포되었다.<br /> <br /> ex) 22.11.01에 빌드한 ecr-test:0.1.2은 spring v2.2.2 -&gt; 22.11.05에 빌드한 ecr-test:0.1.2는 spring v2.6.0<br /> -&gt; 그러나 22.11.05에 배포한 ecr-test:0.1.2 pod는 spring v2.2.2로 실행되고 있는 문제를 발견했다.</p><h3 id="원인"><span class="mr-2">원인</span><a href="#원인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>EKS Worker Node에 기존 ecr-test:0.1.2 버전의 이미지가 남아있었으며, Pod의 imagePullPolicy가 IfNotPresent로 되어 있었다.<br /> <br /> 그래서 Pod는 ecr-test:0.1.2 버전의 이미지가 worker node의 docker에 있으므로 새로 ECR에서 pull 해오지 않고 예전에 pull 해왔던 기존 이미지를 사용하여 Pod를 배포했던 것이다.<br /> <br /></p><h3 id="해결방안"><span class="mr-2">해결방안</span><a href="#해결방안" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>1.먼저 Pod(또는 Deployment)의 yaml에 imagePullPolicy를 Always로 바꿔준다.</strong><br /> <br /></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span> 
  <span class="na">name</span><span class="pi">:</span> <span class="s">test-pod</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">spring</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ecr-test:0.1.2</span>
    <span class="na">imagePullPolicy</span><span class="pi">:</span> <span class="s">Always</span>
</pre></table></code></div></div><p><br /></p><p>그러나 imagePullPolicy를 Always로 해준다고 해도 docker 이미지의 Digest 값이 같으면 다운로드를 시도는 하나 실제로 다운로드 하지 않는 현상이 있다고 한다.<br /> <br /> 그러므로 worker node에 pull 해온 이미지들을 주기적으로 지워줌으로써 이전 이미지를 계속 쓰는 일이 없도록 해야 할 것이다.<br /> <br /></p><p><strong>2.docker prune을 실행시키는 cron shell script를 사용하여 docker image를 주기적으로 지워준다.</strong><br /> <br /> EKS의 경우 Worker Node가 생성될 때 Node Group의 시작템플릿에 cron shell을 생성하는 명령어를 추가해놓으면 worker node가 생성될 때마다 해당 shell도 함께 적용된다.<br /> <br /> 이미 사용하고 있는 시작템플릿이 있는 경우 새로운 버전을 생성하여 적용한다.<br /> <br /></p><ul><li>EKS 콘솔 접속 -&gt; 클러스터 -&gt; 노드그룹 -&gt; 시작템플릿 -&gt; 작업 -&gt; 템플릿 수정(새 버전 생성) -&gt; 이미지 및 기본 설정들은 기존 버전과 동일하게 -&gt; 제일 하단의 사용자데이터(User data)에 아래와 같이 입력 -&gt; 템플릿 생성</ul><p><br /></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre>MIME-Version: 1.0
Content-Type: multipart/mixed<span class="p">;</span> <span class="nv">boundary</span><span class="o">=</span><span class="s2">"==MYBOUNDARY=="</span>

<span class="nt">--</span><span class="o">==</span><span class="nv">MYBOUNDARY</span><span class="o">==</span>

<span class="c">#!/bin/bash -xe</span>
<span class="nv">EKS_REGION</span><span class="o">=</span><span class="s1">'ap-northeast-2'</span>
<span class="nv">EKS_CLUSTER_NAME</span><span class="o">=</span><span class="s1">'cluster-name'</span>
<span class="nv">EKS_API_SERVER_ENDPOINT</span><span class="o">=</span><span class="s1">'https://cluster-api-server-endpoint.gr7.ap-northeast-2.eks.amazonaws.com'</span>
<span class="nv">EKS_B64_CLUSTER_CA</span><span class="o">=</span><span class="s1">'Certificate authority'</span>

/etc/eks/bootstrap.sh <span class="se">\</span>
  <span class="nt">--apiserver-endpoint</span> <span class="nv">$EKS_API_SERVER_ENDPOINT</span> <span class="se">\</span>
  <span class="nt">--b64-cluster-ca</span> <span class="nv">$EKS_B64_CLUSTER_CA</span> <span class="se">\</span>
  <span class="nt">--kubelet-extra-args</span> <span class="s1">'--node-labels=node-type=self,ng=kbland-ekcl-stg-ap'</span> <span class="se">\</span>
  <span class="nv">$EKS_CLUSTER_NAME</span>

<span class="c"># docker prune</span>
<span class="nb">sudo echo</span> <span class="s2">"0 7 * * 1 bash docker image prune"</span> <span class="o">&gt;</span> /etc/cron.weekly/cleaner_image.sh <span class="o">&amp;&amp;</span> <span class="nb">chmod</span> +x /etc/cron.weekly/cleaner_image.sh

<span class="nt">--</span><span class="o">==</span><span class="nv">MYBOUNDARY</span><span class="o">==</span><span class="nt">--</span>
</pre></table></code></div></div><p><br /></p><p>템플릿을 새로 생성한 후 EKS 콘솔에서 시작템플릿 버전을 위에서 생성한 버전으로 변경한다.</p><p><br /></p><p>그 후 ssh -i ec2-key.pem worker-node-ip 으로 worker node에 접속하여 해당 파일이 잘 생성됐나 확인한다.</p><blockquote><p>cat /etc/cron.weekly/cleaner_image.sh</p></blockquote><p><br /></p><p>위와 같은 작업을 통해 해당 현상을 해결하였다.</p><p><br /><br /></p><p>참고</p><ul><li><a href="https://kubernetes.io/ko/docs/concepts/containers/images/#%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%92%80-pull-%EC%A0%95%EC%B1%85">https://kubernetes.io/ko/docs/concepts/containers/images/#%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%92%80-pull-%EC%A0%95%EC%B1%85</a><li><a href="https://docs.docker.com/storage/storagedriver/">https://docs.docker.com/storage/storagedriver/</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/kubernetes/'>Kubernetes</a>, <a href='/categories/eks/'>EKS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/k8s/" class="post-tag no-text-decoration" >k8s</a> <a href="/tags/eks/" class="post-tag no-text-decoration" >eks</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=K8s+Pod+%EC%9D%B4%EB%AF%B8%EC%A7%80+Pull+%EC%97%90%EB%9F%AC+%ED%95%B4%EA%B2%B0%EB%B0%A9%EC%95%88+-+Garit%21&url=https%3A%2F%2Fga0-lee.github.io%2Fposts%2Fk8s-image-pull-error%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=K8s+Pod+%EC%9D%B4%EB%AF%B8%EC%A7%80+Pull+%EC%97%90%EB%9F%AC+%ED%95%B4%EA%B2%B0%EB%B0%A9%EC%95%88+-+Garit%21&u=https%3A%2F%2Fga0-lee.github.io%2Fposts%2Fk8s-image-pull-error%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fga0-lee.github.io%2Fposts%2Fk8s-image-pull-error%2F&text=K8s+Pod+%EC%9D%B4%EB%AF%B8%EC%A7%80+Pull+%EC%97%90%EB%9F%AC+%ED%95%B4%EA%B2%B0%EB%B0%A9%EC%95%88+-+Garit%21" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/k8s-cp-ownership-error/">kubectl cp 명령어 ownership 에러 해결하기</a><li><a href="/posts/k8s-dashboard/">EKS에 Kubernetes Dashboard 배포하기</a><li><a href="/posts/k8s-java-heap-setting/">Java 기반 Pod에 Heap Memory 설정하기</a><li><a href="/posts/vim-backup-error/">vim 에러 Cannot create backup file(add ! to overwrite) 해결하기</a><li><a href="/posts/k8s-image-pull-error/">K8s Pod 이미지 Pull 에러 해결방안</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/eks/">eks</a> <a class="post-tag" href="/tags/terraform/">terraform</a> <a class="post-tag" href="/tags/iac/">iac</a> <a class="post-tag" href="/tags/nginx/">nginx</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/argocd/">ArgoCD</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/docker/">docker</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/k8s-dashboard/"><div class="card-body"> <em class="small" data-ts="1668474000" data-df="ll" > Nov 15, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>EKS에 Kubernetes Dashboard 배포하기</h3><div class="text-muted small"><p> EKS에 Kubernetes Dashboard 배포하기 상황 AWS EKS에 Kubernetes Dashboard를 배포하여 관리하고자 한다. 현 사이트의 경우 보안상의 이유로 Proxy를 통해 Kubernetes Dashboard에 접속해야 한다. 그래서 아래와 같은 경로를 통해 Kubernetes Dashboard Pod에 도달하게 된다...</p></div></div></a></div><div class="card"> <a href="/posts/ArgoCD1/"><div class="card-body"> <em class="small" data-ts="1655863200" data-df="ll" > Jun 22, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ArgoCD를 K8s에 배포하기</h3><div class="text-muted small"><p> ArgoCD Argo CD는 쿠버네티스 환경에서 지속적 전달을 통해 서비스를 배포하기 위한 전략을 도와주는 오픈소스 툴킷이다. Argo CD는 쿠버네티스 클러스터 내부에 Pod 형태로 배포된다. Argo CD는 특정 원격 저장소(GitOps Repository)의 내용을 감지하여 내용의 변경사항(Diff)이 발견되면 이를 사용자에게 알려...</p></div></div></a></div><div class="card"> <a href="/posts/Nginx1/"><div class="card-body"> <em class="small" data-ts="1655863200" data-df="ll" > Jun 22, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Nginx를 k8s에 배포하기</h3><div class="text-muted small"><p> Nginx 배포용 yaml 파일 Nginx를 배포하기 위한 ConfigMap, Deployment, Service를 yaml 파일로 작성한다. [Nginx ConfigMap] apiVersion: v1 kind: ConfigMap metadata: name: nginx-conf data: nginx.conf: | user ngin...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/nlb-sg-rule/" class="btn btn-outline-primary" prompt="Older"><p>EKS Node Group Security Group에 NLB health check용 ingress rule 생성 방지하기</p></a> <a href="/posts/eks-autoscaling-setting/" class="btn btn-outline-primary" prompt="Newer"><p>EKS Autoscaling Group 세부 설정하기</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2093656452178150" crossorigin="anonymous"></script><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ga0-lee">ga0-lee</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/eks/">eks</a> <a class="post-tag" href="/tags/terraform/">terraform</a> <a class="post-tag" href="/tags/iac/">iac</a> <a class="post-tag" href="/tags/nginx/">nginx</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/argocd/">ArgoCD</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/docker/">docker</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
